<%= form_for current_user, url: user_settings_update_path do |f| %>
  <% if current_user.errors.any? %>
    <div id="error_explanation">
    <% current_user.errors.full_messages.each do |msg| %>
      <div class="alert alert-danger alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><%= t('general.close') %></span></button>
        <%= msg %>
      </div>
    <% end %>
    </div>
  <% end %>

  <% if @password_message %>
    <div class="alert alert-success alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><%= t('general.close') %></span></button>
      <%= t(@password_message) %>
    </div>
  <% end %>

  <div class="form-group <%= if current_user.errors.has_key?(:password) then 'has-error' end %>">
    <label class="control-label" for="text"><%= t('users.new_password') %></label>
    <div class="controls">
        <%= f.password_field :password, class: "form-control" %>
    </div>
  </div>

  <div class="form-group <%= if current_user.errors.has_key?(:password_confirmation) then 'has-error' end %>">
    <label class="control-label" for="text"><%= f.label :password_confirmation %></label>
    <div class="controls">
        <%= f.password_field :password_confirmation, class: "form-control" %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit "#{t('users.change_password')}", class: "btn btn-primary" %>
  </div>

<% end %>